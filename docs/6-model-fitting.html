<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Modeling Federal employees data to predict promotions</title>
  <meta name="description" content="Modeling Federal employees data to predict promotions">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Modeling Federal employees data to predict promotions" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Modeling Federal employees data to predict promotions" />
  
  
  

<meta name="author" content="Chia-Rui (Jerry) Chang">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="5-this-chunk-ensures-that-the-thesisdowndss-package-is-2.html">
<link rel="next" href="7-this-chunk-ensures-that-the-thesisdowndss-package-is-3.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />










</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"></a></li>
<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> If you are creating a PDF you’ll need to write your preliminary content here or</a></li>
<li class="chapter" data-level="" data-path="abstract.html"><a href="abstract.html"><i class="fa fa-check"></i>Abstract</a></li>
<li class="chapter" data-level="2" data-path="2-introduction.html"><a href="2-introduction.html"><i class="fa fa-check"></i><b>2</b> Introduction</a></li>
<li class="chapter" data-level="3" data-path="3-this-chunk-ensures-that-the-thesisdowndss-package-is.html"><a href="3-this-chunk-ensures-that-the-thesisdowndss-package-is.html"><i class="fa fa-check"></i><b>3</b> This chunk ensures that the thesisdowndss package is</a><ul>
<li class="chapter" data-level="3.1" data-path="3-this-chunk-ensures-that-the-thesisdowndss-package-is.html"><a href="3-this-chunk-ensures-that-the-thesisdowndss-package-is.html#missing-data"><i class="fa fa-check"></i><b>3.1</b> Missing Data</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="4-this-chunk-ensures-that-the-thesisdowndss-package-is-1.html"><a href="4-this-chunk-ensures-that-the-thesisdowndss-package-is-1.html"><i class="fa fa-check"></i><b>4</b> This chunk ensures that the thesisdowndss package is</a><ul>
<li class="chapter" data-level="4.1" data-path="4-this-chunk-ensures-that-the-thesisdowndss-package-is-1.html"><a href="4-this-chunk-ensures-that-the-thesisdowndss-package-is-1.html#overview-of-multiple-imputation"><i class="fa fa-check"></i><b>4.1</b> Overview of Multiple Imputation</a></li>
<li class="chapter" data-level="4.2" data-path="4-this-chunk-ensures-that-the-thesisdowndss-package-is-1.html"><a href="4-this-chunk-ensures-that-the-thesisdowndss-package-is-1.html#specifying-predictive-conditional-distribution---the-cart-method"><i class="fa fa-check"></i><b>4.2</b> Specifying predictive conditional distribution - the CART method</a></li>
<li class="chapter" data-level="4.3" data-path="4-this-chunk-ensures-that-the-thesisdowndss-package-is-1.html"><a href="4-this-chunk-ensures-that-the-thesisdowndss-package-is-1.html#improving-computational-efficiency"><i class="fa fa-check"></i><b>4.3</b> Improving computational efficiency</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="5-this-chunk-ensures-that-the-thesisdowndss-package-is-2.html"><a href="5-this-chunk-ensures-that-the-thesisdowndss-package-is-2.html"><i class="fa fa-check"></i><b>5</b> This chunk ensures that the thesisdowndss package is</a><ul>
<li class="chapter" data-level="5.1" data-path="5-this-chunk-ensures-that-the-thesisdowndss-package-is-2.html"><a href="5-this-chunk-ensures-that-the-thesisdowndss-package-is-2.html#outcome-variable-and-covariates-selection"><i class="fa fa-check"></i><b>5.1</b> Outcome variable and covariates selection</a></li>
<li class="chapter" data-level="5.2" data-path="5-this-chunk-ensures-that-the-thesisdowndss-package-is-2.html"><a href="5-this-chunk-ensures-that-the-thesisdowndss-package-is-2.html#inspection-of-each-covariate"><i class="fa fa-check"></i><b>5.2</b> Inspection of each covariate</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="6-model-fitting.html"><a href="6-model-fitting.html"><i class="fa fa-check"></i><b>6</b> Model Fitting</a><ul>
<li class="chapter" data-level="6.1" data-path="6-model-fitting.html"><a href="6-model-fitting.html#logistic-regression-with-piecewise-linear-spline-application"><i class="fa fa-check"></i><b>6.1</b> Logistic regression with piecewise linear spline application</a></li>
<li class="chapter" data-level="6.2" data-path="6-model-fitting.html"><a href="6-model-fitting.html#baseline"><i class="fa fa-check"></i><b>6.2</b> Baseline</a></li>
<li class="chapter" data-level="6.3" data-path="6-model-fitting.html"><a href="6-model-fitting.html#model-form"><i class="fa fa-check"></i><b>6.3</b> Model Form</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="7-this-chunk-ensures-that-the-thesisdowndss-package-is-3.html"><a href="7-this-chunk-ensures-that-the-thesisdowndss-package-is-3.html"><i class="fa fa-check"></i><b>7</b> This chunk ensures that the thesisdowndss package is</a><ul>
<li class="chapter" data-level="7.1" data-path="7-this-chunk-ensures-that-the-thesisdowndss-package-is-3.html"><a href="7-this-chunk-ensures-that-the-thesisdowndss-package-is-3.html#estimates-of-model-coefficients"><i class="fa fa-check"></i><b>7.1</b> Estimates of model coefficients</a></li>
<li class="chapter" data-level="7.2" data-path="7-this-chunk-ensures-that-the-thesisdowndss-package-is-3.html"><a href="7-this-chunk-ensures-that-the-thesisdowndss-package-is-3.html#pooled-results"><i class="fa fa-check"></i><b>7.2</b> Pooled results</a><ul>
<li class="chapter" data-level="7.2.1" data-path="7-this-chunk-ensures-that-the-thesisdowndss-package-is-3.html"><a href="7-this-chunk-ensures-that-the-thesisdowndss-package-is-3.html#frequentist-model"><i class="fa fa-check"></i><b>7.2.1</b> Frequentist model</a></li>
<li class="chapter" data-level="7.2.2" data-path="7-this-chunk-ensures-that-the-thesisdowndss-package-is-3.html"><a href="7-this-chunk-ensures-that-the-thesisdowndss-package-is-3.html#bayesian-model"><i class="fa fa-check"></i><b>7.2.2</b> Bayesian Model</a></li>
<li class="chapter" data-level="7.2.3" data-path="7-this-chunk-ensures-that-the-thesisdowndss-package-is-3.html"><a href="7-this-chunk-ensures-that-the-thesisdowndss-package-is-3.html#comparison-between-frequentist-and-bayesian-model"><i class="fa fa-check"></i><b>7.2.3</b> Comparison between Frequentist and Bayesian Model</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="7-this-chunk-ensures-that-the-thesisdowndss-package-is-3.html"><a href="7-this-chunk-ensures-that-the-thesisdowndss-package-is-3.html#inference-based-on-frequentist-model"><i class="fa fa-check"></i><b>7.3</b> Inference based on Frequentist model</a></li>
<li class="chapter" data-level="7.4" data-path="7-this-chunk-ensures-that-the-thesisdowndss-package-is-3.html"><a href="7-this-chunk-ensures-that-the-thesisdowndss-package-is-3.html#conclusion-and-future-work"><i class="fa fa-check"></i><b>7.4</b> Conclusion and future work</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Modeling Federal employees data to predict promotions</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="model-fitting" class="section level1">
<h1><span class="header-section-number">Chapter 6</span> Model Fitting</h1>
<div id="logistic-regression-with-piecewise-linear-spline-application" class="section level2">
<h2><span class="header-section-number">6.1</span> Logistic regression with piecewise linear spline application</h2>
<p>In Generalized Linear Models (GLMs), the relationship between coefficients of predictors and univariate outcome variable is usually linear. The binnedplot of variable <em>Year 10 Salary</em> in the previous chapter, however, indicates that the relationship between outcome variable and the predictor is non-linear. Incorporating smoothing techniques such as the application of spline function is a common strategy to model data with non-linear relationship <span class="citation">(Walther, 2017)</span>. Specifically, we applied piecewise linear spline function to model the data.</p>
<p>To recap the relationship between predictor <em>Year 10 Salary</em> and outcome variable, the proportion of ones below certain salary level is relatively flat, whereas the proportion of ones above certain salary level increases significantly (Figure <a href="6-model-fitting.html#fig:salarybinned2">6.1</a>). This indicates that the coefficient slopes above and below certain salary level are different.</p>
<div class="figure" style="text-align: center"><span id="fig:salarybinned2"></span>
<img src="figure/salary_binned2.png" alt="Year 10 Salary Binned Plot"  />
<p class="caption">
Figure 6.1: Year 10 Salary Binned Plot
</p>
</div>
<p>A spline of degree <span class="math inline">\(D\)</span> is a continuous function formed by connecting polynomial segments. The points where the segments connect are called the knots of the spline. In general, a spline of degree D associated with a knot <span class="math inline">\(\xi_{k}\)</span> takes the form: <span class="math display">\[
(x-\xi_{k})_{+}^{D}= 
\begin{cases}
    0, &amp; x &lt; \xi_{k}\\
    (x-\xi_{k})^{D}, &amp; x \geq \xi_{k}
\end{cases}
\]</span></p>
<p>We created another binned plot with 25 bins (Fig <a href="6-model-fitting.html#fig:salarybinned3">6.2</a>) in order to select knots (<span class="math inline">\(\xi_{k}\)</span>) granularly. The first knot is chosen as the cut point between black and blue segments, which takes the value of $71,674. Since year 10 salary is centered and scaled, this cut point should be <span class="math inline">\(\dfrac{71,674 - 82,425}{10,000} = -1.0751\)</span>. The second knot is chosen as the cut point between blue and red segments, which takes the value of $84,697 (<span class="math inline">\(\dfrac{84,697 - 82,425}{10,000} = 0.2272\)</span>).</p>
<div class="figure" style="text-align: center"><span id="fig:salarybinned3"></span>
<img src="figure/salary_binned3.png" alt="Year 10 Salary Binned Plot"  />
<p class="caption">
Figure 6.2: Year 10 Salary Binned Plot
</p>
</div>
<p>Spline function with higher degree <span class="math inline">\(D\)</span> can better capture the non-linear relationship. However, we found it inappropriate to model the OPM data with higher degree <span class="math inline">\(D\)</span> due to the small proportion of ones in outcome variable. To avoid overfitting, we chose a degree <span class="math inline">\(D\)</span> of 1 for the spline function.</p>
<p>To sum up, denote <span class="math inline">\(x\)</span> as the year 10 salary after transformation. The prediction function for the piecewise linear spline is <span class="math display">\[
\begin{aligned}
&amp; \beta_{0} + \beta_{1}x + \beta_{2}(x - (-1.0751))_{+} + \beta_{3}(x - 0.2272)_{+} \\
 = &amp; \beta_{0} + \beta_{1}x + \beta_{2}(x + 1.0751)(I[x \geq -1.0751]) + \beta_{3}(x - 0.2272)(I[x \geq 0.2272])
\end{aligned}
\]</span></p>
<p>Specifically, if year 10 salary is below the first cut point, then coefficient <span class="math inline">\(\beta_{2}\)</span> and <span class="math inline">\(\beta_{3}\)</span> equals to 0. If year 10 salary is between the first and second cut point, the coefficient <span class="math inline">\(\beta_{2}\)</span> can help capture the difference in slopes. Similarly, if year 10 salary is above the second cut point, the coefficient <span class="math inline">\(\beta_{3}\)</span> along with <span class="math inline">\(\beta_{2}\)</span> can help capture the difference in slopes. We can rewrite the prediction equation as <span class="math display">\[
\begin{cases}
    \beta_{0} + \beta_{1}x, &amp; x &lt; -1.0751\\
    \beta_{0} + \beta_{1}x + \beta_{2}(x - (-1.0751))_{+}, &amp; -1.0751 \leq x &lt; 0.2272 \\
    \beta_{0} + \beta_{1}x + \beta_{2}(x - (-1.0751))_{+} + \beta_{3}(x - 0.2272)_{+}, &amp; x \geq 0.2272
\end{cases}
\]</span></p>
</div>
<div id="baseline" class="section level2">
<h2><span class="header-section-number">6.2</span> Baseline</h2>
<p>Other than covariate <em>Year 10 salary</em>, the rest of the covariates are categorical variables. Given that the proportion of ones in outcome variable is small, it is important to select reasonable baseline for each categorical variable. For variable <em>Gender</em>, we would like to learn whether women were put in disadvantages in promotion, so male is the baseline. For variable <em>Race</em>, since the population size for white is the largest, white is the baseline. For variable <em>Education Level</em>, Bachelor’s degree is the baseline because it is the most common degree federal employees earned. For variable <em>Department Switch</em>, switch is the baseline. For variable <em>Occupational Category</em>, Professional is the baseline. For variable <em>Supervisory Status</em>, supervisor is the baseline. For variable <em>Year 10 Grade</em>, regrouped grade 1 (grade 13 &amp; 14) is the baseline. For variable <em>Change in Pay Rate</em>, change 2 (annual rate change between 5-10%) is the baseline.</p>
</div>
<div id="model-form" class="section level2">
<h2><span class="header-section-number">6.3</span> Model Form</h2>
<p>To sum up, the model takes the following form. <span class="math display">\[
\begin{aligned}
logit(promoted) &amp; = \beta_{0}+ \beta_{1}\text{Female} + \beta_{2}\text{OccA} + \beta_{3}\text{OccO} \\ 
&amp; +\beta_{4}\text{EducA} + \beta_{5}\text{EducC} + \beta_{6}\text{EducD} + \beta_{7}\text{EducE} \\
&amp; + \beta_{8}\text{Non-White} + \beta_{9}\text{NoSwitch} + \beta_{10}\text{Non-Supervisor} \\
&amp; + \beta_{11}\text{Grade0} + \beta_{12}\text{Grade2} + \beta_{13}\text{ScaledSalary} \\
&amp; + \beta_{14}(\text{ScaledSalary} + 1.0751)*I[\text{ScaledSalary} \geq -1.0751] \\
&amp; + \beta_{15}(\text{ScaledSalary} - 0.2272)*I[\text{ScaledSalary} \geq 0.2272] \\ 
&amp; + \beta_{16}\text{Change1} + \beta_{17}\text{Change3}
\end{aligned}
\]</span></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="5-this-chunk-ensures-that-the-thesisdowndss-package-is-2.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="7-this-chunk-ensures-that-the-thesisdowndss-package-is-3.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": [["thesis.pdf", "PDF"], ["thesis.epub", "EPUB"], ["thesis.docx", "Word"]],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
